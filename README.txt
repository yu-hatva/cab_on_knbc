cabocha(/係ろっと)をKNBコーパスで使うツール
			v0.1  10/20/2012

日本語係り受け解析器 cabocha の係り受けをKNBコーパスの全文に対して走らせて、正答・誤答数を数えるツールです。別の係り受け解析器である「係ろっと」にも使えます(フォーマットがcabochaと同じなので)。

ライセンス（とか言うほどたいしたコードではないですが）はGPLとします。作者は何も保証しません。自己責任でお使いください。

【使い方】

以下に使い方を記します。作者は Mac OS X 10.7(Lion) と Ubuntu 12.04 で動作を確認しています。

どこかワークディレクトリを用意し、本パッケージの全てのファイルをそこに置きます。

tcshを使いますので、入ってなければインストールしておいてください。
( {apt-get|yum} install tcsh とかなんとか)
cabochaは --with-charset=utf8 でビルドしたものを使用してください。

prepare3.cshの最初にある2行を、お使いの環境に合わせて適宜変更します。ワークdirのパスと、KNBコーパスのパスになります。そうしておいてワークdirで

 % ./prepare3.csh

とすると、コーパスに対して必要な前処理を行います。結果はワークdirの下のpreproced/ にできます。

つづいて、driver3.cshの最初にある'wdir=...'の行を、prepare3.cshと同じに設定します。そうしてから

 % ./driver3.csh

とすると、コーパス全文に対して係り受けを実行し、結果をコーパスにある正解と比較して、正答・誤答数を表示します。作者の環境では、prepare3, driver3 それぞれ3分程度ずつかかります。

driver3.csh では 'cabocha' を呼んでいます。係ろっとを使うには、ここを（フルパス等に）変えるか、あるいはMacならば、環境変数 DYLD_LIBRARY_PATH を係ろっとの方のlib/ にセットすることで、cabochaのパスが同じでもライブラリは係ろっとの方のをダイナミックリンクで使ってくれるようです。なお Ubuntu では LD_LIBRARY_PATH を変えても切り替わりませんでした。

係り受け解析器を切り替える(cabochaと係ろっとを両方試す)ときは、driver3.csh だけ再実行すればよく、prepare3.csh ははじめに１回だけやっておけばOKです。

【解説】
解説と言ってもどれも短いスクリプトなので読めばわかるレベルですが、一点だけ補足。cabocha/係ろっとの文節区切りとコーパスの文節区切りが異なる場合があります。このようなときは、もし片方がもう片方より「純粋に余分に区切っているだけ」ならば、多い方の余分に区切った文節の係り先は無視します（正答/誤答をカウントしない）。そうでなく、どちらかがどちらかのサブセットに収まらない場合は、文章全体を無視します。この辺、具体的に何をやってるかは getans.pl のソースを参照ください。prepare3.csh実行中に

 one chunk not subset of the other at ./cmp.pl line 102, <FCAB> line 6.

のような行がたくさん出ますが、これはこのためです。

【制限事項】
ざっとチェックはしていますが、十分なチェックをしたとはおせじにも言えないので、もしかしたらバグがあるかも。何かお気づきの点がありましたらご連絡いただけると大変助かりますm(__)m

【連絡先】

質問、感想、バグレポート等歓迎しますので、何かありましたら作者のブログ：

http://yu-hatva.hatenablog.com

へコメントお願いします。質問やバグ等は、できる範囲で対応するつもりです。

